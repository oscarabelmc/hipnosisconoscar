<header role="banner" class="fixed top-0 left-0 right-0 z-50">
    <!-- Background overlay that appears on scroll -->
    <div
        id="header-overlay"
        class="bg-secondary/80 backdrop-blur-sm opacity-0 absolute inset-0 h-24 transition-opacity duration-300"
    >
    </div>

    <div class="relative z-10">
        <div class="container-xl flex justify-between items-center h-24">
            <figure class="max-w-55">
                <a href="#inicio" aria-label="Ir al inicio" class="block">
                    <img
                        src="/svgs/banner-hco.svg"
                        alt="Oscar Abel Mascareno Cervantes - Psicólogo"
                        class="w-full drop-shadow-md"
                    />
                </a>
            </figure>

            <!-- Desktop Navigation -->
            <nav
                class="hidden md:flex items-center gap-8"
                role="navigation"
                aria-label="Navegación principal"
            >
                <a
                    href="#inicio"
                    class="text-white font-serif text-lg hover:text-primary transition-colors duration-200 drop-shadow-sm"
                    >Inicio</a
                >
                <a
                    href="#nosotros"
                    class="text-white font-serif text-lg hover:text-primary transition-colors duration-200 drop-shadow-sm"
                    >Nosotros</a
                >
                <a
                    href="#contacto"
                    class="text-white font-serif text-lg hover:text-primary transition-colors duration-200 drop-shadow-sm"
                    >Contacto</a
                >
            </nav>

            <!-- Mobile Menu Button -->
            <button
                id="menu-toggle"
                class="md:hidden inline-flex items-center justify-center size-12 p-2 bg-transparent border-2 border-white/30 rounded-lg hover:bg-white/10 transition-colors"
                aria-label="Abrir menú de navegación"
                aria-expanded="false"
                aria-controls="mobile-menu"
            >
                <svg
                    class="w-6 h-6 text-white"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div
            id="mobile-menu"
            class="md:hidden fixed top-24 left-0 right-0 bg-secondary/95 backdrop-blur-md transform -translate-y-[150%] transition-transform duration-300 ease-in-out shadow-lg"
            role="navigation"
            aria-label="Navegación móvil"
        >
            <nav class="flex flex-col items-center py-8 gap-6">
                <a
                    href="#inicio"
                    class="mobile-nav-link text-white font-serif text-xl hover:text-primary transition-colors duration-200"
                    >Inicio</a
                >
                <a
                    href="#nosotros"
                    class="mobile-nav-link text-white font-serif text-xl hover:text-primary transition-colors duration-200"
                    >Nosotros</a
                >
                <a
                    href="#contacto"
                    class="mobile-nav-link text-white font-serif text-xl hover:text-primary transition-colors duration-200"
                    >Contacto</a
                >
            </nav>
        </div>
    </div>

    <script>
        // Header scroll effect
        const handleScroll = () => {
            const overlay = document.getElementById('header-overlay');
            if (!overlay) return;

            const scrollPosition = window.scrollY;
            const viewportHeight = window.innerHeight;
            const scrollThreshold = viewportHeight * 0.3;

            if (scrollPosition >= scrollThreshold) {
                overlay.classList.remove('opacity-0');
                overlay.classList.add('opacity-40');
            } else {
                overlay.classList.remove('opacity-40');
                overlay.classList.add('opacity-0');
            }
        };

        window.addEventListener('load', handleScroll);
        window.addEventListener('scroll', handleScroll);

        // Mobile menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

        if (menuToggle && mobileMenu) {
            menuToggle.addEventListener('click', () => {
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                menuToggle.setAttribute('aria-expanded', (!isExpanded).toString());

                if (isExpanded) {
                    mobileMenu.classList.add('-translate-y-full');
                    mobileMenu.classList.remove('translate-y-0');
                } else {
                    mobileMenu.classList.remove('-translate-y-full');
                    mobileMenu.classList.add('translate-y-0');
                }
            });

            // Close menu when clicking on a link
            mobileNavLinks.forEach((link) => {
                link.addEventListener('click', () => {
                    menuToggle.setAttribute('aria-expanded', 'false');
                    mobileMenu.classList.add('-translate-y-full');
                    mobileMenu.classList.remove('translate-y-0');
                });
            });
        }
    </script>
</header>
